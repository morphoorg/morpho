{
  "morpho":
  {
    "do_stan": True,
    "do_postprocessing": True,
    "do_plots": True
  },

  "stan":
  {

    "name": "tritium_generator",

    "model":     {
      "model_name": "tritium_generator",
      "file": "./tritium_model/models/tritium_generator.stan",
      "function_file": [
        {"name" : "constants", "file" : "../functions/constants.functions"},
        {"name" : "func_routines", "file" : "../functions/func_routines.functions"},
        {"name" : "Q_Functions", "file" : "../functions/Q_functions.functions"},
        {"name" : "neutrino_mass_functions", "file" : "../functions/neutrino_mass_functions.functions"},
        {"name" : "tritium_functions", "file" : "../functions/tritium_functions.functions"}
      ],
      "cache": "./tritium_model/cache"
    },

    "data": {
      "type": "mc",
      "files": [
        {
          "name": "./tritium_model/data/tritium.header.data",
          "format":"R"
        },
        {
          "name": "./tritium_model/data/tritium_endpoint.data",
          "format":"R"
        },
        {
          "name": "./tritium_model/data/tritium_gas.data",
          "format":"R"
        }
      ],
      "parameters": [
        {
          "nChains" : 6,
          "MassHierarchy" : 1,
          "lightest_neutrino_mass" : 10.,
          "minKE": 18500,
          "maxKE": 18600
        }
      ]
    },
    "run": {
      "algorithm": "NUTS",
      "iter": 10000,
      "warmup": 8000,
      "chain": 6,

      "init_off": [
        {"uB" : 0.0,
          "uQ1" : 0.0,
          "uQ2" : 0.0,
          "df" : 0.0,
          "uF" : 0.0,
          "uT" : 0.0,
          "uS" : 0.0,
          "eDop":0.05,
          "duration" : 1.0e-05,
          "KE": 18560.0}
        ]
      },

      "sample": "./tritium_model/results/tritium_generator.out",

      "output":
      {
        "name" : "./tritium_model/results/tritium_generator",
        "format" : "root",
        "tree" : "stan_MC",
        "branches" : [
          {"variable" : "neutrino_mass", "root_alias" : "neutrino_mass"},
          {"variable" : "KE_data", "root_alias" : "KE_data"},
          {"variable" : "beta", "root_alias" : "beta"},
          {"variable" : "MainField", "root_alias" : "MainField"},
          {"variable" : "temperature", "root_alias" : "temperature"},
          {"variable" : "sigma_freq", "root_alias" : "sigma_freq"},
          {"variable" : "scatt_width", "root_alias" : "scatt_width"},
          {"variable" : "Q", "root_alias" : "Q"},
          {"variable" : "norm_spectrum", "root_alias" : "norm_spectrum"},
          {"variable" : "time_data", "root_alias" : "time_data"},
          {"variable" : "freq_data", "root_alias" : "freq_data"},
          {"variable" : "KE_recon", "root_alias" : "KE_recon"},
          {"variable" : "spectrum_data", "root_alias" : "spectrum_data"},
          {"variable" : "Q_atom_random", "root_alias" : "Q_atom_random"},
          {"variable" : "Q_mol_random", "root_alias" : "Q_mol_random"},
          {"variable" : "lp__", "root_alias" : "LogLikelihood"}
        ]
      }
    },


  "postprocessing":
  {
    "which_pp":[
      {
        "method_name": "data_reducer",
        "module_name": "data_reducer",
        "which_spectrum": ["frequency","time","KE"],
        "Poisson_redistribution": True,
        "input_file_name" : "./tritium_model/results/tritium_generator.root",
        "input_file_format" : "root",
        "input_tree": "stan_MC",
        "minKE":18500.,
        "maxKE":18600.,
        "nBinHisto":100,
        "output_file_name" : "./tritium_model/results/tritium_generator_reduced_fake.root",
        "output_file_format": "root",
        "output_freq_spectrum_tree": "spectrum",
        "output_KE_spectrum_tree": "spectrumKE",
        "output_time_spectrum_tree": "time",
        "additional_file_name" : "./tritium_model/results/tritium_additionalData.out",
      }

    ]
  }
}
